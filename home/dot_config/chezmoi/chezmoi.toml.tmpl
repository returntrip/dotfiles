{{- $work := false -}}{{/* true if this machine is used for work related tasks */}}
{{- $personal := false -}}{{/* true if this machine is used for personal tasks */}}
{{- $tty := false -}}{{/* true if this machine is a terminal based */}}

{{/* detect WSL or SSH sessions */}}
{{- if or (env "SSH_TTY") (.chezmoi.kernel.osrelease | lower | contains "microsoft") -}}
{{-   $tty = true -}}
{{- end -}}

{{- if eq .chezmoi.hostname "rauros" "t490s-sb" -}}
{{-   $personal = true -}}
{{- end -}}

{{- if $tty -}}
{{-   if or (eq .chezmoi.hostname "W5CG2241T4") (eq .chezmoi.osRelease.id "ubuntu" "fedoraremixforwsl") -}}
{{-     $work = true -}}
{{-   else -}}
{{-   $personal = true -}}
{{-   end -}}
{{- end -}}

{{- $email := "stefano@figura.im" -}}
{{- $name := "returntrip" -}}
{{- if $work -}}
{{-   $email = "stefano.figura@tietoevry.com" -}}
{{-   $name = "Stefano Figura" -}}      
{{- end -}}

[git]
    autoCommit = true

[data]
    work = {{ $work }}
    personal = {{ $personal }}
    email = {{ $email | quote }}
    name = {{ $name | quote }}
